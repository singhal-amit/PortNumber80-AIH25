# 📑 **Challenge 1b: Multi-Collection PDF Analysis**

## 🚀 **Overview**

A semantic PDF analysis pipeline that processes multiple document collections using **persona-driven tasks** to extract only the most relevant sections from large documents.

Supports scenarios like:

- ✈️ **Travel Planning**
- 🧾 **HR & Compliance**
- 📚 **Education**
- 🍽️ **Corporate Catering**

---

# ⚙️ **Tech Stack**

| Layer                 | Tool                    | Purpose                            |
| --------------------- | ----------------------- | ---------------------------------- |
| **Language**          | Python 3.10             | Core scripting                     |
| **Embedding Model**   | `sentence-transformers` | Semantic text embeddings           |
| **PDF Parsing**       | PyMuPDF (`fitz`)        | PDF text extraction                |
| **Similarity Search** | `scikit-learn`          | Cosine similarity for ranking      |
| **Data Handling**     | JSON                    | Structured input/output            |
| **Containerization**  | Docker                  | Portable, reproducible environment |
| **Persona Store**     | `persona.json`          | Persona-specific keywords          |

---

## 🗂️ **Project Structure**

```
Solution_1b/
├── Collection_1/
│   ├── PDFs/                       # PDF files
│   ├── challenge1b_input.json      # Input configuration
│   ├── challenge1b_output.json     # Expected or given output
│   └── solution1b_output.json      # Solution output generated by app.py
├── Collection_2/
│   ├── PDFs/
│   ├── challenge1b_input.json
│   ├── challenge1b_output.json
│   └── solution1b_output.json
├── Collection_3/
│   ├── PDFs/
│   ├── challenge1b_input.json
│   ├── challenge1b_output.json
│   └── solution1b_output.json
├── src/
│   ├── local_model/                # Local semantic embedding model
│   ├── app.py                      # Main runner
│   ├── utils.py                    # Helper functions
│   ├── persona.json                # Persona definitions & learned keywords
├── requirements.txt                # Python dependencies
├── Dockerfile                      # Container build file
├── README.md                       # Project documentation
```

---

## 📁 **Collections**

### ✅ **Collection 1: Travel Planning**

- **Persona**: Travel Planner
- **Task**: Plan a 4-day trip for 10 college friends to the South of France
- **Documents**: Travel guides

### ✅ **Collection 2: Adobe Acrobat Learning**

- **Persona**: HR Professional
- **Task**: Design & manage onboarding and compliance forms
- **Documents**: Acrobat user manuals

### ✅ **Collection 3: Recipe Collection**

- **Persona**: Food Contractor
- **Task**: Prepare vegetarian buffet dinner menu for corporate event
- **Documents**: Cooking & catering guides

---

## 🧾 **Input JSON Example**

```json
{
  "challenge_info": {
    "challenge_id": "round_1b_001",
    "test_case_name": "travel_plan"
  },
  "documents": [
    { "filename": "guide1.pdf", "title": "South France Travel Guide" }
  ],
  "persona": {
    "role": "Travel Planner"
  },
  "job_to_be_done": {
    "task": "Plan the itinerary for a group trip."
  }
}
```

---

## ✅ **Expected Output: `solution1b_output.json`**

```json
{
  "metadata": {
    "input_documents": ["guide1.pdf"],
    "persona": "Travel Planner",
    "job_to_be_done": "Plan the itinerary for a group trip.",
    "processing_timestamp": "2025-07-27T12:00:00Z"
  },
  "extracted_sections": [
    {
      "document": "guide1.pdf",
      "section_title": "4-Day Itinerary Highlights",
      "importance_rank": 1,
      "page_number": 3
    }
  ],
  "subsection_analysis": [
    {
      "document": "guide1.pdf",
      "refined_text": "Details about hotels, transport, sightseeing...",
      "page_number": 3
    }
  ]
}
```

---

## 🧩 **Key Highlights**

✅ Persona-driven section ranking
✅ Semantic similarity for precise matching
✅ JSON output for easy integration
✅ Same logic works in Docker or virtualenv

---

## 🐳 **Run Locally**

```bash
# Inside virtualenv
cd src
python app.py
```

## 🐳 **Run with Docker**

```bash
docker build -t persona-doc-intel:v8 .

docker run --rm -it ^
  -v ${PWD}/Collection_1:/app/Collection_1 ^
  -v ${PWD}/Collection_2:/app/Collection_2 ^
  -v ${PWD}/Collection_3:/app/Collection_3 ^
  persona-doc-intel:v8
```

✅ Outputs are saved back as `solution1b_output.json` in each collection folder.
